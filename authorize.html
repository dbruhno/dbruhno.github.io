<html>
    <head>
        <title>check</title>
        <style>
            H1{
                margin:0 auto;
                display:block;
            }
        </style>
    </head>
    <body>
        <div class="container1">
            <H1 id="demo">This is text!</H1>
            <script>
                function parse_query_string(query) {
                  var vars = query.split("&");
                  var query_string = {};
                  for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split("=");
                    var key = decodeURIComponent(pair.shift());
                    var value = decodeURIComponent(pair.join("="));
                    // If first entry with this name
                    if (typeof query_string[key] === "undefined") {
                      query_string[key] = value;
                      // If second entry with this name
                    } else if (typeof query_string[key] === "string") {
                      var arr = [query_string[key], value];
                      query_string[key] = arr;
                      // If third or later entry with this name
                    } else {
                      query_string[key].push(value);
                    }
                  }
                  return query_string;
                }
                var query = window.location.search.substring(1);
                var parsed = parse_query_string(query)
                var body = "grant_type=authorization_code&code=" + parsed.code + "&redirect_uri=https%3A%2F%2Fdbruhno.github.io%2Fauthorize.html"
                document.getElementById("demo").innerHTML = body;
                
                var xhr = new XMLHttpRequest();
                xhr.open("POST", 'https://www.reddit.com/api/v1/access_token', true);
                xhr.setRequestHeader('Authorization':'Basic TnpucmNTLVg3a1R2cFRDaHRPVmlsdzpCRFBjd1BGWng3OWkyY1ZhUmRmeDNLMXdYMVRhaXc=');
                xhr.send(body);
                xhr.onload = function(){
                    document.getElementById("demo").innerHTML = ${xhr.response};
                };
                
                document.getElementById("demo").innerHTML = parsed.code
            </script>
        </div>
    </body>
</html>
